---
title: "Tutorial - Detecção de sinais usando o pacote `monitoraSom`"
author: "Gabriel L. M. Rosa"
date: "`r Sys.Date()`"
output: pdf_document
---

## Instalação e setup inicial

Seja bem-vindo(a) ao tutorial do monitoraSom! Nessa primeira etapa, vamos fazer os downloads e instalações necessárias para o uso do monitoraSom.

### 1. Baixar e instalar o R.

- Verifique se já existe alguma versão instalada.
- Ao fazer uma nova instalação, dê preferência para a versão mais recente.
- link para download: https://cran.r-project.org/bin/windows/base/

### 2. Baixar e instalar o Rstudio.
- Após instalar o R, instale o Rstudio.
- Atenção: se houver mais de uma versão do R instalada, certifique-se qual está sendo usada ao abrir o Rstudio.
- link para download: https://posit.co/download/rstudio-desktop/

### 3. Instalar o Rtools (passo necessário apenas para usuários do Windows)
- Rtools é necessário para compilar pacotes do R que foram instalados a partir do GitHub.
- Verifique se já existe alguma versão instalada. Caso exista, verifique se é adequada ao projeto. Se não for, desinstale a versão existente.
- Neste momento, a versão mais recente é a 4.5.
- link para download: https://cran.r-project.org/bin/windows/Rtools/

### 4. Criar uma nova pasta para conter os arquivos usandos pelo monitoraSom.
- Para usuários do Windows, recomendamos criar uma pasta para análises na raiz do sistema, e dentro dela uma pasta para este projeto, por exemplo, "C:/Meus Projetos/monitoraSom_tutorial". Dessa forma o caminho para os arquivos será o mesmo mesmo que os arquivos sejam movidos para outro computador.

### 5. Instalar o devtools para poder instalar pacotes a partir do GitHub.
- Esse comando deve ser executado no Rstudio após a instalação do Rtools.
```{r eval=FALSE, include=TRUE}
install.packages("devtools")
```

### 6. Carregar o devtools para o ambiente de trabalho.
```{r eval=FALSE, include=TRUE}
library(devtools)
```

### 7. Instalar o monitoraSom
- O monitoraSom depende de outros pacotes do R para funcionar adequadamente.
- Atenção 1: A isntalação poderá solicitar a confirmação de instalação das dependências. Recomendamos que seja feita a instalação ou atualização de todas as dependências respondendo '1' ("All").
- Atenção 2: Pode ser solictada também a resposta sobre instalação de pacotes de precisam de compilação. Nesse caso, responda 'Yes'.
```{r eval=FALSE, include=TRUE}
install_github("ConservaSom/monitoraSom", dependencies = TRUE)
```

### 8. Carregar o monitoraSom no ambiente de trabalho do R para testar a
   instalação.
```{r eval=FALSE, include=TRUE}
library(monitoraSom)
```

### 9. Salvar esse script no diretório de trabalho conforme descrito no passo 4.
- Priorize salvar com um nome informativo e que mantenha a sequência de passos desse e dos tutoriais seguintes, por exemplo, "script_01_instalação.R".

### Checkpoint 01
Parabéns! Você instalou o monitoraSom e está pronto para começar a usar. Você pode salvar esse script no diretório de trabalho conforme descrito no passo 4.

### 10. Organizando o ambiente de trabalho.
Vamos seguir a partir deste ponto assumindo que o diretório de trabalho está organizado conforme descrito no passo 4 e que o código está salvo em um arquivo em formato de script ou notebook (Rmarkdown ou Quarto).

- Vamos checar se o diretório de trabalho da sessão atual é o mesmo do diretório de trabalho do nosso projeto. No nosso caso, compartilhamos o mesmo diretório de trabalho do conteúdo do tutorial do pacote soundmeteR, então vamos ter que definir manualmente o diretório de trabalho da sessão atual.
```{r}
getwd()
```

- Se o script estiver salvo no diretório de trabalho, podemos usar o comando abaixo definir automaticamente a partir da localização dele.
```{r}
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd() # Verificando se o diretório de trabalho foi definido corretamente
```

### 11. Povoando o diretório de trabalho com os arquivos de exemplo do monitoraSom.
- O monitoraSom disponibiliza um conjunto de arquivos de exemplo para o usuário testar o pacote. Vamos usar a função `set_workspace` para povoar o diretório de trabalho com os arquivos de exemplo.
```{r}
set_workspace(project_path = "./", example_data = TRUE)
```

- Vamos fazer algumas checagens para verificar se os arquivos de exemplo foram depositados corretamente.
```{r}

list.files("./soundscapes/", full.names = TRUE)
list.files("./roi_tables/", full.names = TRUE)
list.files("./templates/", full.names = TRUE)
list.files("./app_presets/", full.names = TRUE)
list.files("./soundscapes_metadata/", full.names = TRUE)
list.files("./roi_cuts/", full.names = TRUE)
```

### Checkpoint 02
Parabéns! Você povoou o diretório de trabalho com os arquivos de exemplo do monitoraSom e está pronto para começar a usar. Você pode salvar esse script no diretório de trabalho conforme descrito no passo 4.
